@model ProviderWithAllDataViewModel

@{
    ViewData["Title"] = "Details";
    Layout = "_ProviderLayout";
}

<div class="page">
    <div class="sidebar-container">
        <aside class="sidebar">
            <div class="side-btn">
                <a asp-controller="RequestHistory" asp-action="GetRequests" asp-route-id="@Model.ProviderId">سجل الطلبات المتاحة</a>
            </div>
            <p class="side-title">مواعيد العمل</p>
            <div class="calendar">
                <table>
                    @foreach (var day in Model.Days)
                    {
                        <tr>
                            <td>@day.Day</td>
                            <td>@day.Start_Time.ToString("hh:mm tt")</td>
                            <td>@day.End_Time.ToString("hh:mm tt")</td>
                        </tr>
                    }
                </table>
            </div>
            <p class="side-price">متوسط سعر الخدمة @Html.DisplayFor(model => model.MinPrice) : @Html.DisplayFor(model => model.MaxPrice) جنيه</p>
        </aside>
    </div>

    <div class="page-content">
        <div class="section">
            <div class="profile">
                <div class="mydata">
                    <img src="@Model.ProfilePicture_ID" class="profile-pic" />
                    <div class="profile-info">
                        <h6>@Html.DisplayFor(model => model.ProviderName)</h6>
                        <p class="rating">
                            <i class="fa-solid fa-star"></i> @Html.DisplayFor(model => model.Rating)
                            <!-- <span>(150 تقييماً)</span> -->
                        </p>
                        <p class="city">
                            @Html.DisplayFor(model => model.ServiceName)
                        </p>
                    </div>
                </div>

                <div class="profile-optn">
                    <a asp-action="Edit" asp-route-id="@Model.ProviderId" class="settings">
                        <i class="fa-solid fa-gear"></i>
                    </a>
                </div>
            </div>

            <div class="bio">
                <p class="head">نبذة عني</p>
                <p class="bio-content">
                    @Html.DisplayFor(model => model.Bio)
                </p>
            </div>
        </div>

        <hr class="divider" />

        <div class="section">
            <div class="head">
                <p>صور لبعض خدماتنا</p>
            </div>
                <a asp-action="EditPortfolios" asp-controller="ProviderProfile" class="btn-add"><i class="fa-solid fa-plus"></i> أضف بعض الاعمال </a>
            <div class="gallery">
                @if (Model.Portfolios == null || !Model.Portfolios.Any())
                {
                    <p>لا يوجد شئ للعرض</p>
                }
                else
                {
                    @foreach (var album in Model.Portfolios)
                    {
                        @foreach(var image in album.Portfolio_Image)
                        {
                    <div class="album">
                        @*
                             <div class="img-options">
                                 <a asp-action="" asp-controller=""><i class="fa-solid fa-bars"></i></a>
                             </div>
                        *@
                        <div class="picpic">
                                <img src="@image.Img_Url" alt="" class="gallery-img" />
                        </div>
                        <div class="description">@album.Bio</div>
                    </div>

                        }
                    }
                }

            </div>
        </div>

        <hr class="divider" />

        <div class="section">
            <div class="head">
                <p>التعليقات</p>
            </div>

            <div class="comments-section">

                <div class="posted-comments" id="reviewsSection">
                    @foreach (var review in Model.Reviews)
                    {
                        <div class="comment">
                            <div class="comment-topside">
                                <div class="user-data">
                                    <img src="" class="user-pic" />
                                    <div class="user-info">
                                        <p class="user-name">
                                            @review.Customer?.ApplicationUser?.UserName
                                        </p>
                                    </div>
                                </div>
                                <div class="user-rating">
                                    <i class="fa-solid fa-star"></i> @review.Rating
                                </div>
                            </div>

                            <p class="the-comment">
                                @review.Comment
                            </p>
                        </div>
                        <hr class="divider" />
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@section Provider {
    <link href="~/css/Provider.css" rel="stylesheet" />
}

@section ModalValid {
    <!-- Include Bootstrap and jQuery (necessary for the modal) -->

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
}

@*

<h1>Details</h1>

<div>
    <a asp-action="Edit" asp-route-id="@Model.ProviderId" class="text-decoration-none"> اعدادات الحساب</a>
    <hr />
    <dl class="row">
        <dd>

        <img src="@Model.ProfilePicture_ID" width="75px" class="img-fluid rounded-circle" alt="Provider Image"/>
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.ProviderName)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.ProviderName)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Email)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Email)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Age)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Age)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Bio)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Bio)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.ProfilePicture_ID)
        </dt>
        <dd class="col-sm-10">
            <a href="@Model.ProfilePicture_ID" target="_blank">Click Here</a>
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Address)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Address)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.PhoneNumber)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.PhoneNumber)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Portfolios)
        </dt>
        <dd>
          <a asp-action="EditPortfolios" asp-route-id="@Model.ProviderId">زود شغلك</a>

            <div class="container">
                @if (Model.Portfolios == null || !Model.Portfolios.Any())
                {
                    <p>مفيش شغل جديد</p>
                }
                else
                {
                    @foreach (var item in Model.Portfolios)
                    {
                        <div class="portfolio-item">
                            <h5>@item.Name</h5>
                            <p>@item.Bio</p>
                            <div class="portfolio-images">
                                @if (item.Portfolio_Image == null || !item.Portfolio_Image.Any())
                                {
                                    <p>No images available for this ِAlbum.</p>
                                }
                                else
                                {
                                    <div class="row">
                                        @foreach (var image in item.Portfolio_Image)
                                        {
                                            <div class="col-sm-4">
                                                <img src="@image.Img_Url" alt="Portfolio Image" class="img-fluid" />
                                            </div>
                                        }
                                    </div>
                                }
                            </div>
                        </div>
                        <hr />
                    }
                }
            </div>
        </dd>
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Rating)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Rating)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.MinPrice)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.MinPrice)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.MaxPrice)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.MaxPrice)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.ServiceName)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.ServiceName)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Save)
        </dt>
  
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Days)
        </dt>
        <dd class="col-sm-10">
            <ul>
                @foreach (var day in Model.Days)
                {
                    <li>
                        <strong>Day:</strong> @day.Day <br />
                        <strong>Start Time:</strong> @day.Start_Time.ToString("hh:mm tt") <br />
                        <strong>End Time:</strong> @day.End_Time.ToString("hh:mm tt")
                    </li>
                }
            </ul>
        </dd>
        <!-- Portfolio Section -->

        <!-- Reviews Section -->
        <div class="container">
            <h4>Reviews</h4>
            <div id="reviewsSection" class="border p-3" style="height: 200px; overflow-y: auto;">
                @foreach (var review in Model.Reviews)
                {
                    <div class="review mb-2">
                        <p><strong>Customer:</strong> @review.Customer?.ApplicationUser?.UserName</p>
                        <p><strong>Comment:</strong> @review.Comment</p>
                        <p><strong>Rating:</strong> @review.Rating</p>
                    </div>
                    <hr />
                }
            </div>
        </div>
            <dt>
                <a asp-controller="RequestHistory" asp-action="GetRequests" asp-route-id="@Model.ProviderId" class="text-decoration-none">خانت الخدمات  </a>
            </dt>     
    </dl>
</div>
*@
@*

<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="saveModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="saveModalLabel">Notification</h5>
            </div>
            <div class="modal-body">
            </div>
        </div>
    </div>
</div>

*@




