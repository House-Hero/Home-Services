@using DAL.Models;
@using DAL.VM;
@model PaginatedVM<Provider>

@{
    ViewData["Title"] = "Details";

}

<h1>Details</h1>
<div>
    <form method="post" asp-action="sorted" asp-controller="Category">
        <input name="CategoryID" id="CategoryID" hidden value="@ViewBag.CategoryID " />
        <label>Sort by Service</label>
        <select name="serviceid" id="serviceid">
            <option value="0" selected>select service</option>
            @foreach (var item in Model.Services)
            {
                <option value="@item.Id">@item.Name</option>
            }
        </select>
        <br />
        <label>Sort by City</label>
        <select name="cityid" id="cityid">
            <option value="0">Select City</option>
            @foreach (var item in ViewBag.City)
            {
                <option value="@item.Id">@item.Name</option>
            }
        </select>
        <br />
        <lable> Rating </lable>
        <select name="rating" id="rating">

            <option value="0">Select Reting</option>
            @for (int i = 1; i <= 5; i++)
            {
                <option value="@i">@i</option>
            }
        </select>
        <br />
        <input type="submit" value="sort">
    </form>
</div>
<div>
    <h2>@ViewBag.CategoryName</h2>

    <h4>Services in this category:</h4>
    <table class="table table-bordered table-hover">
        <tr>
            <th>Service Name</th>
            <th>Provider Name</th>
            <th>Bio</th>
            <th>Rating</th>
            <th></th>
        </tr>
        @foreach (var service in Model.Services)
        {
            foreach (var item in Model.item)
            {
                if (service.Id == item.ServiceId)
                {
                    <tr>
                        <th>@service.Name</th>
                        <th>@item.ApplicationUser.UserName</th>
                        <th>@item.Bio</th>
                        <th>@item.Rating</th>
                        <th>
                        <a asp-controller="Provider" asp-action="Details" asp-route-id="@item.Id">Details</a>
                        </th>
                    </tr>

                }
            }

        }
    </table>
</div>
<div>
    <form asp-action="Details" asp-controller="Category">
        @if (Model.Haspreviouspage)
        {
            <button type="submit" name="pagenumber" value="@(Model.pagenum-1)" class="btn btn-primary">Previous</button>
        }
        <span>page @Model.pagenum of @Model.totalpage</span>
        @if (Model.Hasnextpage)
        {
            <button type="submit" name="pagenumber" value="@(Model.pagenum+1)" class="btn btn-primary">Next</button>
        }

    </form>
</div>

<div>
    <a asp-action="GetAll">Back to List</a>
</div>


@* @model Category

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h2>@Model.Name</h2>

    <h4>Services in this category:</h4>
    <ul>
        @foreach (var service in Model.Services)
        {
            <li>
                <strong>Service Name:</strong> @service.Name

                <ul>
                    <li><strong>Providers for this service:</strong></li>
                    @if (service.Providers != null && service.Providers.Any())
                    {
                        foreach (var provider in service.Providers)
                        {
                            <li>
                                <div>
                                    <strong>Provider Name:</strong> @provider.ApplicationUser.UserName <br />
                                    <strong>Provider Bio:</strong> @provider.Bio <br />
                                    <strong>Rating:</strong> @provider.Rating <br />
                                    <strong>Price Range:</strong> @provider.MinPrice - @provider.MaxPrice
                                    <br />
                                    <a asp-controller="Provider" asp-action="Details" asp-route-id="@provider.Id">Details</a>
                                </div>
                            </li>
                        }
                    }
                    else
                    {
                        <li>No providers available for this service.</li>
                    }
                </ul>
            </li>
        }
    </ul>
</div>

<div>
    <a asp-action="GetAll">Back to List</a>
</div>
 *@